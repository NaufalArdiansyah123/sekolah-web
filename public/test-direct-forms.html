<!DOCTYPE html>
<html>
<head>
    <title>Test Direct Form Submission</title>
    <meta name="csrf-token" content="test-token">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .form-container { margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        .approve { background: green; color: white; }
        .reject { background: red; color: white; }
        .test { background: blue; color: white; }
        #output { margin-top: 20px; padding: 10px; background: #f0f0f0; }
    </style>
</head>
<body>
    <h1>Test Direct Form Submission</h1>
    
    <div class="form-container">
        <h2>Test 1: Direct Approval Form</h2>
        <form method="POST" action="http://127.0.0.1:8000/admin/extracurriculars/registration/1/approve" 
              onsubmit="return confirm('Test approval?')">
            <input type="hidden" name="_token" value="test-csrf-token">
            <button type="submit" class="approve">✓ Test Approve Registration 1</button>
        </form>
    </div>
    
    <div class="form-container">
        <h2>Test 2: Direct Rejection Form</h2>
        <form method="POST" action="http://127.0.0.1:8000/admin/extracurriculars/registration/1/reject" 
              onsubmit="return testReject(this)">
            <input type="hidden" name="_token" value="test-csrf-token">
            <input type="hidden" name="notes" id="notes-1">
            <button type="submit" class="reject">✗ Test Reject Registration 1</button>
        </form>
    </div>
    
    <div class="form-container">
        <h2>Test 3: JavaScript URL Generation</h2>
        <button onclick="testUrlGeneration()" class="test">Test URL Generation</button>
    </div>
    
    <div id="output"></div>
    
    <script>
    function testReject(form) {
        const notes = prompt("Alasan penolakan (opsional):");
        if (notes !== null) {
            const notesInput = form.querySelector("input[name=\"notes\"]");
            if (notesInput) {
                notesInput.value = notes;
            }
            console.log("Rejection form submitting to:", form.action);
            document.getElementById("output").innerHTML += "<p>Rejection form would submit to: " + form.action + " with notes: " + notes + "</p>";
            return true;
        }
        return false;
    }
    
    function testUrlGeneration() {
        const baseUrl = "http://127.0.0.1:8000";
        const approveUrl = baseUrl + "/admin/extracurriculars/registration/1/approve";
        const rejectUrl = baseUrl + "/admin/extracurriculars/registration/1/reject";
        
        document.getElementById("output").innerHTML = 
            "<h3>Generated URLs:</h3>" +
            "<p>Approve URL: " + approveUrl + "</p>" +
            "<p>Reject URL: " + rejectUrl + "</p>";
            
        console.log("Approve URL:", approveUrl);
        console.log("Reject URL:", rejectUrl);
    }
    </script>
    
    <h2>Instructions:</h2>
    <ol>
        <li>Make sure you are logged in as admin in another tab</li>
        <li>Replace "test-csrf-token" with real CSRF token from your admin page</li>
        <li>Replace registration ID "1" with actual registration ID</li>
        <li>Test the forms above</li>
        <li>Check browser console (F12) for debug logs</li>
    </ol>
    
    <h2>Real URLs to test:</h2>
    <ul>
        <li><a href="http://127.0.0.1:8000/admin/extracurriculars/all-registrations" target="_blank">All Registrations</a></li>
        <li><a href="http://127.0.0.1:8000/admin/dashboard" target="_blank">Admin Dashboard</a></li>
        <li><a href="http://127.0.0.1:8000/login" target="_blank">Login</a></li>
    </ul>
</body>
</html>